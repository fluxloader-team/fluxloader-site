// For formatting: https://aka.ms/devcontainer.json
// For config: https://github.com/devcontainers/templates/tree/main/src/javascript-node-mongo
// For features: https://containers.dev/features
{
	"name": "Fluxloader Site Dev",
	"dockerComposeFile": "docker-compose.yml",
	"service": "app",
	"workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
	// Forward MongoDB port
	"forwardPorts": [27017],
	// Automatically install dependencies after the container builds
	"postCreateCommand": "npm ci",
	// Speed up startup on subsequent runs by not re-pulling every time
	"updateContentCommand": "npm rebuild",
	// Enable useful VS Code extensions
	"customizations": {
		"vscode": {
			"extensions": ["mongodb.mongodb-vscode", "ms-vscode.vscode-typescript-next", "esbenp.prettier-vscode", "github.vscode-github-actions"],
			"settings": {
				"editor.formatOnSave": true,
				"files.exclude": {
					"node_modules": true
				}
			}
		}
	}
}
